# Server Configuration
server.port=${PORT:8081}

# Database Configuration - Uses environment variables with MySQL fallback for local dev
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mysql://localhost:3306/roots?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Nishu@123}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER:com.mysql.cj.jdbc.Driver}

# JPA/Hibernate Configuration - Dynamic based on database
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=${FORMAT_SQL:false}
spring.jpa.properties.hibernate.dialect=${HIBERNATE_DIALECT:org.hibernate.dialect.MySQL8Dialect}
spring.jpa.database-platform=${HIBERNATE_DIALECT:org.hibernate.dialect.MySQL8Dialect}

# Performance optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Connection pool optimization for Render
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000

# File upload configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Logging Configuration - Reduced for production performance
logging.level.com.eduprajna=${LOG_LEVEL:INFO}
logging.level.org.springframework.web=${WEB_LOG_LEVEL:WARN}
logging.level.org.hibernate.SQL=${SQL_LOG_LEVEL:WARN}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=${BINDER_LOG_LEVEL:WARN}
logging.level.org.springframework.security=${SECURITY_LOG_LEVEL:WARN}

# Cloudinary Configuration - Uses environment variables for sensitive data
# Note: Remove the PowerShell syntax below and set these as actual environment variables in Render
# CLOUDINARY_CLOUD_NAME=dnwrpzvbz
# CLOUDINARY_API_KEY=617656758894993
# CLOUDINARY_API_SECRET=WdEtdM3yiiwzhZl2BqPurGSDefE
